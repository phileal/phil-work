<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Active Users</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-gray-200">
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-72 bg-gray-800 p-6 flex flex-col">
      <h2 class="text-2xl font-bold text-blue-400 mb-6">Admin Panel</h2>

      <nav class="flex-1 space-y-2">
        <a href="admin-dashboard.html" class="block py-2 px-3 rounded-lg hover:bg-gray-700">Dashboard</a>

        <!-- Products -->
        <div>
          <button onclick="toggleMenu('productsMenu')" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700">Products ▾</button>
          <div id="productsMenu" class="space-y-1 hidden pl-4 mt-1">
            <a href="add-product.html" class="block py-2 px-3 rounded-lg hover:bg-gray-700">Add Product</a>
            <a href="products.html" class="block py-2 px-3 rounded-lg hover:bg-gray-700">View Products</a>
          </div>
        </div>

        <!-- Orders -->
        <div>
          <button onclick="toggleMenu('ordersMenu')" class="w-full text-left py-2 px-3 rounded-lg hover:bg-gray-700">Orders ▾</button>
          <div id="ordersMenu" class="space-y-1 hidden pl-4 mt-1">
            <a href="pending-orders.html" class="block py-2 px-3 rounded-lg hover:bg-gray-700">Pending Orders</a>
            <a href="completed-orders.html" class="block py-2 px-3 rounded-lg hover:bg-gray-700">Completed Orders</a>
          </div>
        </div>

        <!-- Active Users -->
        <a href="active-users.html" class="block py-2 px-3 rounded-lg bg-gray-700">Active Users</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6">
      <h1 class="text-2xl font-bold mb-6 text-blue-400">Active Users</h1>
      <p class="mb-4">Total Active Users: <span id="activeUserCount">0</span></p>

      <div id="activeUsersGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Active user cards will be appended here -->
      </div>
    </main>
  </div>

  <script>
    function toggleMenu(id) {
      const menu = document.getElementById(id);
      menu.classList.toggle('hidden');
    }

    // Render active users
    function renderActiveUsers() {
      const usersGrid = document.getElementById('activeUsersGrid');
      const activeCount = document.getElementById('activeUserCount');

      // Match with dashboard storage key
      const users = JSON.parse(localStorage.getItem('customers')) || [];

      // Filter only active customers
      const activeUsers = users.filter(u => u.isActive === true);

      // Update total count
      activeCount.innerText = activeUsers.length;

      // Clear previous cards
      usersGrid.innerHTML = '';

      if(activeUsers.length === 0){
        usersGrid.innerHTML = `<p class="text-gray-400 col-span-full">No active users</p>`;
        return;
      }

      // Render cards
      activeUsers.forEach(u => {
        const card = document.createElement('div');
        card.className = 'bg-gray-800 rounded-xl p-5 shadow';
        card.innerHTML = `
          <h3 class="text-lg font-semibold">${u.name || 'Unnamed User'}</h3>
          <p class="text-sm text-gray-400">${u.email || 'No email'}</p>
          <p class="text-sm mt-2">Status: <span class="text-green-400">Active</span></p>
        `;
        usersGrid.appendChild(card);
      });
    }

    renderActiveUsers();
  </script>
</body>
</html>
